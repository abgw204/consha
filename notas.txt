O que falta?

1 - Refatorar e deixar tudo na norma().
2 - Erro e free em caso de comando inexistente().
3 - Concertar aspas().
4 - Control c e Control \().
5 - Colocar exit code na variavel de ambiente().
6 - Colocar Bultins na execução dos pipes().
7 - Subshell().